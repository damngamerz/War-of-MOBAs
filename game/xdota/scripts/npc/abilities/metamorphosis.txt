"metamorphosis"
{
	// General
	//-------------------------------------------------------------------------------------------------------------
	"BaseClass"					"ability_datadriven"
	"AbilityBehavior"			"DOTA_ABILITY_BEHAVIOR_POINT | DOTA_ABILITY_BEHAVIOR_AOE"
	"AbilityUnitDamageType"		"DAMAGE_TYPE_MAGICAL"
	"AbilityTextureName"		"terrorblade_metamorphosis"
	"AbilityType"				"DOTA_ABILITY_TYPE_ULTIMATE"
	"AOERadius"					"500"

	// Precache
	//-------------------------------------------------------------------------------------------------------------
	"precache"
	{
		"soundfile"	 	"soundevents/game_sounds_heroes/game_sounds_antimage.vsndevts"
		"particle"		"particles/units/heroes/hero_antimage/antimage_blink_end.vpcf"
		"particle"		"particles/units/heroes/hero_antimage/antimage_blink_start.vpcf"
		"particle"		"particles/dark_smoke_test.vpcf"
		"soundfile"		"soundevents/voscripts/game_sounds_vo_terrorblade.vsndevts"
		"particle"		"particles/units/heroes/hero_enigma/enigma_blackhole_n.vpcf"
		"particle"		"particles/econ/events/fall_major_2015/teleport_end_fallmjr_2015_lvl2_black.vpcf"
		"particle"		"particles/test_particle/metamorphosis_buff.vpcf"
		"particle"		"particles/econ/events/nexon_hero_compendium_2014/teleport_start_e_nexon_hero_cp_2014.vpcf"
		"model"			"models/items/terrorblade/dotapit_s3_fallen_light_metamorphosis/dotapit_s3_fallen_light_metamorphosis.vmdl"
		"particle"  "particles/status_fx/status_effect_ancestral_spirit.vpcf"
	}

	// Casting
	//-------------------------------------------------------------------------------------------------------------
	"AbilityCastPoint"				"0 0 0 0"
	"AbilityCastRange"				"300"

	// Time
	//-------------------------------------------------------------------------------------------------------------
	"AbilityCooldown"			 "120"

	// Cost
	//-------------------------------------------------------------------------------------------------------------
	"AbilityManaCost"			 "0 0 0 0"

	"AbilityDamage"				 "50 70 100"

	// Special
	//-------------------------------------------------------------------------------------------------------------
	"AbilitySpecial"
	{
		"01"
		{
			"var_type"					"FIELD_FLOAT"
			"delay"						"1.5"
		}
		"02"
		{
			"var_type"					"FIELD_INTEGER"
			"health_bonus"				"350"
		}
		"03"
		{
			"var_type"					"FIELD_INTEGER"
			"meta_duration"				"30 40 90"
		}
		"04"
		{
			"var_type"					"FIELD_INTEGER"
			"atk_speed_bonus_flat"	 	"50 75 100"
		}
		"05"
		{
			"var_type"					"FIELD_INTEGER"
			"bonus_damage"				"100 150 175"
		}
		"06"
		{
			"var_type"					"FIELD_INTEGER"
			"damage_aoe"				"500 500 500"
		}
	}

	"OnUpgrade"
	{
		"RunScript"
		{
			"ScriptFile"			"heroes/betrayer/metamorphosis.lua"
			"Function"				"UpHuntersThirst"
		}
	}

	"OnSpellStart"
	{
		"FireSound"
		{
			"EffectName"	"antimage_anti_spawn_04"
			"Target" 		"CASTER"
		}

		"RunScript"
		{
			"ScriptFile"	"heroes/betrayer/metamorphosis.lua"
			"Function"		"MetamorphosisCast"
			"Target"		"POINT"
		}

		"FireSound"
		{
			"EffectName"	"Hero_Antimage.Blink_in"
			"Target"		"CASTER"
		}
	}

	"Modifiers"
	{
		"modifier_particle_holder_meta"
		{
			"Passive"			"0"
			"IsHidden"			"1"
			"IsPurgable"		"0"
			"IsBuff"			"1"

			"EffectName"		"particles/test_particle/metamorphosis_buff_hand.vpcf"
			"EffectAttachType"	"attach_hitloc"
		}

		"modifier_coccon"
		{
			"IsHidden"			"0"
			"Duration"			"1.5"
			"IsBuff"			"0"

			"Attributes"		"MODIFIER_ATTRIBUTE_IGNORE_INVULNERABLE"

			"States"
			{
				"MODIFIER_STATE_STUNNED"			"MODIFIER_STATE_VALUE_ENABLED"
				"MODIFIER_STATE_NO_UNIT_COLLISION"	"MODIFIER_STATE_VALUE_ENABLED"
				"MODIFIER_STATE_NOT_ON_MINIMAP" 	"MODIFIER_STATE_VALUE_ENABLED"
				"MODIFIER_STATE_OUT_OF_GAME"		"MODIFIER_STATE_VALUE_ENABLED"
				"MODIFIER_STATE_NO_HEALTH_BAR"		"MODIFIER_STATE_VALUE_ENABLED"
				"MODIFIER_STATE_INVULNERABLE"	"MODIFIER_STATE_VALUE_ENABLED"
			}

			"OnDestroy"
			{
				"RunScript"
				{
					"ScriptFile"	"heroes/betrayer/metamorphosis.lua"
					"Function"		"CocconEnd"
				}

				"FireSound"
				{
					"EffectName"	"terrorblade_terr_cast_03"
					"Target" 		"CASTER"
				}
			}
		}
	}
}
