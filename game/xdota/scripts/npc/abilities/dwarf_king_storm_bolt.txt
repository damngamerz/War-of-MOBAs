"dwarf_king_storm_bolt"
{
    "BaseClass"                     "ability_datadriven"
    "AbilityTextureName"            "dwarf_king_storm_bolt"
    "AbilityBehavior"               "DOTA_ABILITY_BEHAVIOR_POINT"
    "AbilityUnitTargetTeam"         "DOTA_UNIT_TARGET_TEAM_ENEMY"
    "AbilityUnitTargetType"         "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BASIC | DOTA_UNIT_TARGET_BUILDING"
    "AbilityUnitDamageType"         "DAMAGE_TYPE_MAGICAL"
    "AbilityCastAnimation"          "ACT_DOTA_CAST_ABILITY_1"
    "AbilityCastRange"              "0"
    "AbilityCastPoint"              "0.3"
    "AbilityCooldown"               "10.0 10.0 7.5 7.5"

    "AbilityManaCost"               "60"
    "AbilityDamage"                 "100 150 175 200"
    
    "AbilitySpecial"
    {
        "01"
        {
            "var_type"              "FIELD_INTEGER"
            "bolt_speed"            "900"
        }
        "02"
        {
            "var_type"              "FIELD_FLOAT"
            "stun_hero_duration"    "1.5"
        }
        "03"
        {
            "var_type"              "FIELD_FLOAT"
            "stun_creep_duration"   "5.0"
        }
        "04"
        {
            "var_type"              "FIELD_INTEGER"
            "vision_radius"         "225"
        }
        "05"
        {
            "var_type"              "FIELD_INTEGER"
            "radius"         		"225"
        }
        "06"
        {
        	"var_type"				"FIELD_INTEGER"
        	"max_distance"			"750"
        }
        "07"
        {
        	"var_type"				"FIELD_INTEGER"
        	"vision_duration"		"3"
        }
        "08"
        {
        	"var_type"				"FIELD_INTEGER"
        	"refund_mana"			"45"
        }
        "09"
        {
        	"var_type"				"FIELD_INTEGER"
        	"damage_per_stack"		"5"
        }
        "10"
        {
        	"var_type"				"FIELD_INTEGER"
        	"non_hero_bonus_damage_mult"	"4"
        }
    }

    "precache"
    {
        "soundfile"         "soundevents/game_sounds_heroes/game_sounds_sven.vsndevts"
        "particle"          "particles/test_particle/dwarf_king_storm_bolt.vpcf"
        "particle"          "particles/generic_gameplay/generic_stunned.vpcf"
    }

    "OnUpgrade"
    {
    	"RunScript"
    	{
    		"ScriptFile"	"heroes/dwarf_king/storm_bolt.lua"
    		"Function"		"Upgrade"
    	}
    }

    "OnSpellStart"
    {
    	"RunScript"
    	{
    		"ScriptFile"	"heroes/dwarf_king/storm_bolt.lua"
    		"Function"		"ProjectileLaunch"
    	}
        "FireSound"
        {
            "EffectName"        "Hero_Sven.StormBolt"
            "Target"            "CASTER"
        }
    }

    "OnProjectileHitUnit"
    {
		"DeleteOnHit"	"0"

        "FireSound"
        {
            "EffectName"        "Hero_Sven.StormBoltImpact"
            "Target"            "TARGET"
        }

        "FireEffect"
        {
            "EffectName"        "particles/units/heroes/hero_sven/sven_storm_bolt_projectile_explosion.vpcf"
            "EffectAttachType"  "attach_origin"
            "Target"            "TARGET"
            "ControlPointEntities"
            {
                "TARGET"    "attach_origin"
                "TARGET"    "attach_origin"
                "TARGET"    "attach_origin"
                "TARGET"    "attach_origin" //CP3 has a child explosion origin
            }
        }

        "RunScript"
        {
        	"ScriptFile"	"heroes/dwarf_king/storm_bolt.lua"
        	"Function"		"DealDamage"
        }

        "ApplyModifier"
        {
            "ModifierName"  "modifier_storm_bolt"
            "Target"
            {
                "Center"    "TARGET"
                "Types"     "DOTA_UNIT_TARGET_HERO | DOTA_UNIT_TARGET_BUILDING"
            }
            "Duration"      "%stun_hero_duration"
        }

        "ApplyModifier"
        {
            "ModifierName"  "modifier_storm_bolt"
            "Target"
            {
                "Center"    "TARGET"
                "Types"     "DOTA_UNIT_TARGET_BASIC"
            }
            "Duration"      "%stun_creep_duration"
        }

        "RunScript"
        {
        	"ScriptFile"	"heroes/dwarf_king/storm_bolt.lua"
        	"Function"		"UpgradesHandler"
        }
    }

    "Modifiers"
    {
        "modifier_storm_bolt"
        {
            "IsDebuff"      "1"

            "Duration"      "%stun_hero_duration"
            "OverrideAnimation" "ACT_DOTA_DISABLED"

            "EffectName"        "particles/generic_gameplay/generic_stunned.vpcf"
            "EffectAttachType"  "follow_overhead"

            "States"
            {
                "MODIFIER_STATE_STUNNED"    "MODIFIER_STATE_VALUE_ENABLED"
            }
        }

        "modifier_storm_bolt_bonus_damage"
        {
        	"IsPurgable"		"0"
        	"IsBuff"			"1"

        	"Attributes"		"MODIFIER_ATTRIBUTE_MULTIPLE | MODIFIER_ATTRIBUTE_PERMANENT"
        }
    }
}
